<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Fortune Gem Slot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body {
      background: linear-gradient(to bottom, #3a003a, #1a001a);
      font-family: sans-serif;
      color: #fff;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: gold;
      text-shadow: 2px 2px 5px #000;
    }
    .slot-machine {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 20px auto;
      max-width: 100%;
    }
    .column {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .column img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 8px;
      background: #222;
      box-shadow: 0 0 10px #ff00ff;
    }
    .controls {
      margin-top: 15px;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      background: gold;
      color: black;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background: #ffcc00;
    }
    select {
      padding: 8px;
      font-size: 1em;
      border-radius: 5px;
      border: none;
      margin-left: 10px;
    }
    .result {
      margin-top: 15px;
      font-size: 1.2em;
    }
    .winner {
      animation: shine 0.8s infinite alternate;
    }
    @keyframes shine {
      0% { filter: brightness(1) drop-shadow(0 0 5px gold); transform: scale(1); }
      100% { filter: brightness(1.8) drop-shadow(0 0 15px gold); transform: scale(1.1); }
    }
    #splash {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: #000; display: flex;
      flex-direction: column; justify-content: center; align-items: center;
      z-index: 20;
      color: gold;
    }
  </style>
</head>
<body>

  <div id="splash"></div>

  <h1>ðŸŽ° Fortune Gem Slot</h1>
  <div id="balance">Saldo: $100</div>

  <div class="controls">
    Apuesta:
    <select id="betAmount">
      <option value="1">$1</option>
      <option value="2">$2</option>
      <option value="5">$5</option>
    </select>
    <button onclick="spin()">Girar</button>
  </div>

  <div class="slot-machine">
    <div class="column" id="col-0"><img><img><img></div>
    <div class="column" id="col-1"><img><img><img></div>
    <div class="column" id="col-2"><img><img><img></div>
  </div>

  <div class="result" id="result">Â¡Buena suerte!</div>

  <audio id="bgMusic" src="background.mp3" loop></audio>

  <script>
    const symbols = ['symbol_1.png','symbol_2.png','symbol_3.png','symbol_4.png','symbol_5.png','symbol_6.png','symbol_7.png','symbol_8.png'];
    let balance = 100;

    function preloadImages() {
      const promises = symbols.map(src => {
        return new Promise((resolve, reject) => {
          const img = new Image();
          img.onload = resolve;
          img.onerror = reject;
          img.src = src;
        });
      });
      return Promise.all(promises);
    }

    window.addEventListener('load', () => {
      const splash = document.getElementById('splash');
      const splashText = document.createElement('p');
      splashText.textContent = 'Cargando recursos...';
      splash.appendChild(splashText);

      preloadImages().then(() => {
        splashText.textContent = '';
        const btn = document.createElement('button');
        btn.textContent = 'Iniciar Juego';
        btn.onclick = startGame;
        splash.appendChild(btn);
      });
    });

    function startGame() {
      document.getElementById('splash').style.display = 'none';
      document.getElementById('bgMusic').play();
      updateBalance();
      showInitialGrid();
    }

    function updateBalance() {
      document.getElementById('balance').textContent = `Saldo: $${balance}`;
    }

    function showInitialGrid() {
      [0,1,2].forEach(i => {
        document.querySelectorAll(`#col-${i} img`).forEach((img, idx) => {
          img.src = symbols[(i+idx)%symbols.length];
        });
      });
    }

    function spin() {
      balance -= parseInt(document.getElementById('betAmount').value);
      updateBalance();
      document.getElementById('result').textContent = 'Girando...';
    }
  </script>
</body>
</html>
